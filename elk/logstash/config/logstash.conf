input {
    beats {
      port => 5044
      }
    
    redis {
        data_type =>"list"
        key =>"filebeat"
        host =>"192.168.1.211"
        port => 6379
        password => "2019divi"
        threads => "8"
        db => 10
        codec => json
        }

    redis {
        data_type =>"list"
        key =>"divi-api"
        host =>"192.168.1.211"
        port => 6379
        password => "2019divi"
        threads => "8"
        db => 10
        codec => json
	#type => "divi-api"
        }
  }


output {
    stdout { codec => rubydebug }
    if [type] == "divi-api" {
        elasticsearch {
            hosts => [ "es01:9200" ]
            #index => "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}"
            index => "%{[type]}-%{+YYYY.MM.dd}"
            #manage_template => false
            }
    }
}
